{
  "$schema": "https://raw.githubusercontent.com/nrwl/nx/refs/heads/master/packages/nx/schemas/nx-schema.json",
  "installation": {
    "version": "latest",
    "plugins": {
      "sources": []
    }
  },
  "useDaemonProcess": false,
  "defaultBase": "master",
  "namedInputs": {
    "default": ["{projectRoot}/**/*"],
    "production": ["!{projectRoot}/**/*.spec.ts", "!{projectRoot}/**/*.test.ts"]
  },
  "targetDefaults": {
    "sync": {
      "cache": true
    },
    "build": {
      "cache": true,
      "dependsOn": ["sync", "^build"]
    },
    "test": {
      "cache": true,
      "inputs": ["default", "^production"]
    },
    "lint": {
      "cache": true,
      "inputs": ["default", "^production"]
    },
    "lint:fix": {
      "cache": false
    },
    "format": {
      "cache": false
    },
    "format:check": {
      "cache": true,
      "inputs": ["default"]
    },
    "type-check": {
      "cache": true,
      "inputs": ["default", "^production"]
    },
    "dev": {
      "cache": false
    },
    "worker": {
      "cache": false
    },
    "clean": {
      "cache": false
    }
  },
  "parallel": 3,
  "plugins": [
    {
      "plugin": "@nx/next/plugin",
      "options": {
        "startTargetName": "next:start",
        "buildTargetName": "next:build",
        "devTargetName": "next:dev",
        "serveStaticTargetName": "serve-static",
        "buildDepsTargetName": "build-deps",
        "watchDepsTargetName": "watch-deps"
      }
    },
    "@nx/docker"
  ],
  "release": {
    "releaseTag": {
      "pattern": "release/{projectName}/{version}"
    },
    "changelog": {
      "automaticFromRef": true
    },
    "groups": {
      "apps": {
        "projects": ["api", "voice-agent"],
        "projectsRelationship": "independent",
        "docker": {
          "groupPreVersionCommand": "npx nx run-many -t docker:build -p api,voice-agent",
          "skipVersionActions": true,
          "registryUrl": "ghcr.io"
        },
        "changelog": {
          "projectChangelogs": true
        }
      }
    },
    "docker": {
      "preVersionCommand": "",
      "versionSchemes": {
        "production": "{currentDate|YYMM.DD}.{shortCommitSha}",
        "develop": "develop-{shortCommitSha}"
      }
    }
  },
  "nxCloudId": "693d6d47c244495eb66b1b66"
}
