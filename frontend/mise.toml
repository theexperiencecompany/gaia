# Frontend mise.toml for GAIA
# This file defines tasks for the GAIA frontend (Next.js/React).
#
# Quick Start:
#   mise dev             # Start development server
#   mise install         # Install dependencies
#   mise tasks               # List all available commands

[tools]
mprocs = "0.7.3"
node = "22"

[env]
NEXT_PUBLIC_API_BASE_URL = "http://localhost:8000/api/v1/"

[tasks.dev]
description = "Run development server with Turbopack"
run = "pnpm dev"

[tasks."dev:webpack"]
description = "Run development server with Webpack"
run = "pnpm dev:webpack"

[tasks.build]
description = "Build for production"
run = "pnpm build"

[tasks.start]
description = "Start production server"
run = "pnpm start"

[tasks.type]
description = "Run TypeScript type checking"
run = "pnpm type"

[tasks.lint]
description = "Run Biome check"
run = "pnpm check"

[tasks."lint:fix"]
description = "Run Biome check with auto-fix"
run = "pnpm fix"

[tasks.format]
description = "Format code with Prettier"
run = "pnpm format"

[tasks.depcheck]
description = "Check for unused dependencies"
run = "pnpm depcheck"

[tasks.prepare]
description = "Setup husky hooks"
run = "pnpm prepare"

[tasks."generate:barrels"]
description = "Generate barrel exports"
run = "pnpm generate-barrels"

[tasks.deps]
description = "Install dependencies with pnpm"
run = "pnpm install"

[tasks.clean]
description = "Clean build artifacts and node_modules"
run = "rm -rf .next node_modules .turbo"

[tasks."clean:cache"]
description = "Clean Next.js cache"
run = "rm -rf .next"

[tasks.analyze]
description = "Analyze bundle size"
run = "ANALYZE=true pnpm build"

[tasks.knip]
description = "Find unused files and exports"
run = "pnpm knip"

# Pre-commit tasks
[tasks.precommit]
description = "Run all prek checks"
run = "prek run --all-files"

[tasks."precommit:prettier"]
description = "Run prettier formatter (prek hook)"
run = "prek run prettier"

[tasks."precommit:barrels"]
description = "Generate barrel exports (prek hook)"
run = "prek run generate-barrels"

[tasks."precommit:trailing-whitespace"]
description = "Check trailing whitespace (prek hook)"
run = "prek run trailing-whitespace"

[tasks."precommit:check-json"]
description = "Check JSON files (prek hook)"
run = "prek run check-json"

[tasks."precommit:check-merge-conflict"]
description = "Check for merge conflicts (prek hook)"
run = "prek run check-merge-conflict"

[tasks."precommit:detect-secrets"]
description = "Detect secrets in codebase (prek hook)"
run = "prek run detect-secrets"
